# 2.1. View Components (`internal/tui`)

**Goal**: Implement the TUI using **Bubble Tea** (The Elm Architecture) and **Lip Gloss** for styling. The board will feature a responsive 4-column layout (`Backlog`, `Todo`, `Doing`, `Done`).

## 1. References & Context
*   **PRD**: [Kanban Board](../PRD.md#31-the-kanban-board-tui)
*   **Libraries**:
    *   [charmbracelet/bubbletea](https://github.com/charmbracelet/bubbletea): MVU Framework.
    *   [charmbracelet/lipgloss](https://github.com/charmbracelet/lipgloss): Styling & Layout.
*   **Patterns**:
    *   **Tree of Models**: The Board is the "Parent" model; Columns are "Child" models.
    *   **Modular Styles**: Define styles in `styles.go` to reuse colors/borders.

## 2. Detailed Steps

### A. Style Definitions (`internal/tui/styles.go`)
Define a central stylesheet using `lipgloss`.

```go
package tui

import "github.com/charmbracelet/lipgloss"

var (
    ColumnStyle = lipgloss.NewStyle().
        Border(lipgloss.RoundedBorder()).
        BorderForeground(lipgloss.Color("62")).
        Padding(1, 2)

    UnfocusedStyle = lipgloss.NewStyle().
        BorderForeground(lipgloss.Color("240")) // Dim border for inactive columns
)
```

### B. Column Model (`internal/tui/column.go`)
Each column is its own `tea.Model` to manage its own list of tasks.

```go
type Column struct {
    Status   core.Status
    Tasks    []core.Task
    Cursor   int
    Focused  bool
    width    int
}

func (c Column) Update(msg tea.Msg) (Column, tea.Cmd) {
    // Handle cursor movement (j/k) only if Focused is true
}

func (c Column) View() string {
    // Render list of tasks or "No Tasks"
    // Apply ColumnStyle vs UnfocusedStyle
}
```

### C. Board Model (`internal/tui/model.go`)
The main entrypoint. It holds the 4 columns and orchestrates focus.

```go
type Model struct {
    store   store.Store
    columns []Column
    active  int // Index of active column (0-3)
    keys    KeyMap
    width   int
    height  int
}

func NewModel(s store.Store) Model {
    return Model{
        store:   s,
        columns: []Column{
            {Status: core.StatusBacklog},
            {Status: core.StatusTodo},
            {Status: core.StatusDoing},
            {Status: core.StatusDone},
        },
    }
}

func (m Model) View() string {
    // 1. Render all columns
    cols := []string{}
    for _, c := range m.columns {
        cols = append(cols, c.View())
    }
    
    // 2. Join horizontally
    board := lipgloss.JoinHorizontal(lipgloss.Left, cols...)
    return board
}
```

## 3. Success Criteria
- [ ] `internal/tui` package structure established.
- [ ] `lipgloss` styles defined for focused/unfocused states.
- [ ] `Column` component renders a list of dummy tasks.
- [ ] `Board` component renders 4 columns side-by-side.
- [ ] Layout handles window resize (Update column widths dynamically).
