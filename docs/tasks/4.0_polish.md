# 4.0. Polish & Parity (`cmd/kevin`)

**Goal**: Prepare the application for release with proper documentation, build scripts, and cross-platform checks.

## 1. References & Context
*   **PRD**: [Distribution](../PRD.md#6-distribution--maintenance)
*   **Libraries**:
    *   `spf13/cobra/doc`: Auto-generate Markdown docs from CLI commands.
    *   `bubbletea`: Ensure `tea.WindowSizeMsg` is handled for responsive layout.
*   **Tools**:
    *   `goreleaser` (optional) or `Makefile` for cross-compilation.

## 2. Detailed Steps

### A. Documentation Generation (`internal/cli/docs.go`)
Add a hidden command to generate markdown docs.

```go
func (app *CLI) newDocsCmd() *cobra.Command {
    return &cobra.Command{
        Use:    "docs",
        Hidden: true,
        RunE: func(cmd *cobra.Command, args []string) error {
            return doc.GenMarkdownTree(app.rootCmd, "./docs/cli")
        },
    }
}
```

### B. Responsive Layout (TUI Polish)
Ensure `internal/tui/model.go` handles `tea.WindowSizeMsg`.

```go
func (m Model) Update(msg tea.Msg) (tea.Model, tea.Cmd) {
    switch msg := msg.(type) {
    case tea.WindowSizeMsg:
        m.width = msg.Width
        m.height = msg.Height
        // Recalculate column widths: e.g. (TotalWidth - Borders) / NumColumns
        for i := range m.columns {
            m.columns[i].SetWidth(m.calculateColumnWidth())
        }
    }
    return m, nil
}
```

### C. Build & Distribute
Create a `Makefile` for consistent builds.

```makefile
.PHONY: build run docs

build:
	go build -o bin/kevin ./cmd/kevin

run: build
	./bin/kevin

docs:
	go run ./cmd/kevin docs

# Cross-compile (Manual)
build-all:
	GOOS=linux GOARCH=amd64 go build -o bin/kevin-linux-amd64 ./cmd/kevin
	GOOS=darwin GOARCH=arm64 go build -o bin/kevin-darwin-arm64 ./cmd/kevin
	GOOS=windows GOARCH=amd64 go build -o bin/kevin-windows-amd64.exe ./cmd/kevin
```

## 3. Success Criteria
- [ ] `kevin docs` generates markdown files in `docs/cli/`.
- [ ] Minimizing terminal window triggers TUI resize logic (columns shrink).
- [ ] `Makefile` exists and works for `make build`.
- [ ] Binaries for Linux/Mac/Windows compile effectively.
